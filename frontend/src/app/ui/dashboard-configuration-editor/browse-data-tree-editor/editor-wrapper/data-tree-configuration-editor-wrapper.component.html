<div class="col-12 parent-root-container">
    <div class="row m-0 mt-3 mb-3 justify-content-between">
        <div class="col-auto">
            <h2>
                {{'APP.BROWSE-DATA-TREE-CONFIGURATION-EDITOR.TITLE' | translate}}
            </h2>
        </div>

        <div class="col-auto" *ngIf="formArray">
            <button mat-raised-button class="col-auto mr-2" (click)="save()" [disabled]="pendingBlockingRequest">
                {{'APP.BROWSE-DATA-TREE-CONFIGURATION-EDITOR.SAVE' | translate}}
            </button>
    
            <button mat-raised-button class="col-auto" (click)="downloadJSON()">
                {{'APP.BROWSE-DATA-TREE-CONFIGURATION-EDITOR.DOWNLOAD-JSON' | translate}}
            </button>
        </div>


    </div>
    
    <div class="row m-0 mt-4" *ngIf="formArray">
        <div class="col-12">
            <mat-form-field appearance="legacy">
                <mat-label>
                    {{'APP.BROWSE-DATA-TREE-CONFIGURATION-EDITOR.CONFIGURATION-KEY' | translate}}
                </mat-label>
                <input type="text" matInput [(ngModel)]="loadedSettings.key" required #configurationKey="ngModel">
                <mat-error>{{'COMMONS.VALIDATION.REQUIRED' | translate}}</mat-error>
            </mat-form-field>
        </div>
        <div class="col-auto">
            <nav class="config-navigation">
                <button 
                    class="config-navigation-item"
                    [color]="(selectedFormGroup === item)? 'accent' : ''" 
                    *ngFor="let item of formArray?.controls; let index = index" 
                    mat-raised-button (click)="selectGroup(index)"
                    >
                    {{item.value?.id ?? ('APP.BROWSE-DATA-TREE-CONFIGURATION-EDITOR.CONFIGURATION-UNTITLED' | translate)}}


                    <button class="delete-btn" color="primary" mat-mini-fab (click)="removeConfiguration(index)"><mat-icon>delete</mat-icon></button>

                </button>

                <button class="mt-3" mat-raised-button (click)="addConfiguration()">
                    {{'APP.BROWSE-DATA-TREE-CONFIGURATION-EDITOR.ADD-CONFIGURATION' | translate}}
                </button>
            </nav>
        </div>
        <app-browse-data-tree-editor *ngIf="selectedFormGroup" [formGroup]="selectedFormGroup" class="col"></app-browse-data-tree-editor>
    </div>
    
</div>