<mat-toolbar class="navigation-bar row" color="primary">

	<div class="hamburger" [class.change]="expanded" id="hamburger" (click)="toggleNav()">
		<div class="icon-bar icon-bar1"></div>
		<div class="icon-bar icon-bar2"></div>
		<div class="icon-bar icon-bar3"></div>
	</div>
	<a class="col-auto app-logo" routerLink="/">
		<img [src]="themingService.getImage('assets/images/app-logo', '.png')" alt="IntelComp">
	</a>
	<!-- <div class="col-auto" *ngIf="isAuthenticated()">
		<a mat-button *ngIf="authService.hasPermission(authService.permissionEnum.ViewDatasetPage)"
			routerLink="datasets" routerLinkActive="active">{{'APP.NAVIGATION.DATASETS' | translate}}</a>
		<span>|</span>
		<a mat-button *ngIf="authService.hasPermission(authService.permissionEnum.ViewIndicatorPage)"
			routerLink="indicators" routerLinkActive="active">{{'APP.NAVIGATION.INDICATORS' | translate}}</a>
		<span>|</span>
		<a mat-button *ngIf="authService.hasPermission(authService.permissionEnum.ViewIndicatorPage)"
			routerLink="indicator-report" routerLinkActive="active">{{'APP.NAVIGATION.INDICATOR-REPORTS' |
			translate}}</a>
		<span>|</span>
		<a mat-button *ngIf="authService.hasPermission(authService.permissionEnum.ViewIndicatorPage)"
			routerLink="indicator-dashboard" routerLinkActive="active">{{'APP.NAVIGATION.INDICATOR-DASHBOARD' |
			translate}}</a>
		<span>|</span>
		<a mat-button *ngIf="authService.hasPermission(authService.permissionEnum.ViewDataAccessRequestPage)"
			routerLink="data-access-requests" routerLinkActive="active">{{'APP.NAVIGATION.DATA-ACCESS-REQUEST' |
			translate}}</a>
		<span>|</span>
		<a mat-button *ngIf="authService.hasPermission(authService.permissionEnum.ViewTenantPage)" routerLink="tenants"
			routerLinkActive="active">{{'APP.NAVIGATION.TENANTS' | translate}}</a>
		<span>|</span>
		<a mat-button *ngIf="authService.hasPermission(authService.permissionEnum.ViewTenantRequestPage)"
			routerLink="tenant-requests" routerLinkActive="active">{{'APP.NAVIGATION.TENANT-REQUESTS' | translate}}</a>
		<span>|</span>
		<a mat-button *ngIf="authService.hasPermission(authService.permissionEnum.ViewMasterItemPage)"
			routerLink="master-items" routerLinkActive="active">{{'APP.NAVIGATION.MASTER-ITEMS' | translate}}</a>
		<span *ngIf="authService.hasPermission(authService.permissionEnum.ViewUsersPage)
		|| authService.hasPermission(authService.permissionEnum.ViewRoleAssignmentPage)
		|| authService.hasPermission(authService.permissionEnum.ViewAccessTokensPage)
		|| authService.hasPermission(authService.permissionEnum.ViewUserInvitationPage)
		|| authService.hasPermission(authService.permissionEnum.ViewForgetMeRequestPage)
		|| authService.hasPermission(authService.permissionEnum.ViewWhatYouKnowAboutMeRequestPage)
		|| authService.hasPermission(authService.permissionEnum.ViewTenantConfigurationPage)
		|| authService.hasPermission(authService.permissionEnum.ViewNotificationPage)
		|| authService.hasPermission(authService.permissionEnum.ViewNotificationEventRulePage)
		|| authService.hasPermission(authService.permissionEnum.ViewBlueprintRequestPage)
		|| authService.hasPermission(authService.permissionEnum.ViewNotificationTemplatePage)
		|| authService.hasPermission(authService.permissionEnum.ViewBlueprintTemplatePage)">
			<span>|</span>
			<button mat-button [mat-menu-trigger-for]="menu">{{'APP.NAVIGATION.ADMIN-TITLE' | translate}}
				<mat-icon>keyboard_arrow_down</mat-icon>
			</button>
			<mat-menu x-position="before" #menu="matMenu">
				<a *ngIf="authService.hasPermission(authService.permissionEnum.ViewUsersPage)" mat-menu-item
					routerLink="/users">{{'APP.NAVIGATION.USERS' | translate}}</a>
				<a *ngIf="authService.hasPermission(authService.permissionEnum.ViewApiClientsPage)" mat-menu-item
					routerLink="/api-clients">{{'APP.NAVIGATION.API-CLIENTS' | translate}}</a>
				<a *ngIf="authService.hasPermission(authService.permissionEnum.ViewRoleAssignmentPage)" mat-menu-item
					routerLink="/user-role-assignment">{{'APP.NAVIGATION.USER-ROLE-ASSIGNMENT' | translate}}</a>
				<a *ngIf="authService.hasPermission(authService.permissionEnum.ViewAccessTokensPage)" mat-menu-item
					routerLink="/access-tokens">{{'APP.NAVIGATION.ACCESS-TOKENS' | translate}}</a>
				<a *ngIf="authService.hasPermission(authService.permissionEnum.ViewUserInvitationPage)" mat-menu-item
					routerLink="/user-invitation">{{'APP.NAVIGATION.USER-INVITATION' | translate}}</a>
				<a *ngIf="authService.hasPermission(authService.permissionEnum.ViewForgetMeRequestPage)" mat-menu-item
					routerLink="/forget-me/requests">{{'APP.NAVIGATION.FORGET-ME-REQUESTS' | translate}}</a>
				<a *ngIf="authService.hasPermission(authService.permissionEnum.ViewWhatYouKnowAboutMeRequestPage)"
					mat-menu-item
					routerLink="/what-you-know-about-me/requests">{{'APP.NAVIGATION.WHAT-YOU-KNOW-ABOUT-ME-REQUESTS' |
					translate}}</a>
				<a *ngIf="authService.hasPermission(authService.permissionEnum.ViewTenantConfigurationPage)"
					mat-menu-item routerLink="/configuration">{{'APP.NAVIGATION.TENANT-CONFIGURATION' | translate}}</a>
				<a *ngIf="authService.hasPermission(authService.permissionEnum.ViewNotificationPage)" mat-menu-item
					routerLink="/notifications">{{'APP.NAVIGATION.NOTIFICATIONS' | translate}}</a>
					<a *ngIf="authService.hasPermission(authService.permissionEnum.ViewBlueprintRequestPage)" mat-menu-item
					routerLink="/blueprint-requests">{{'APP.NAVIGATION.BLUEPRINT-REQUESTS' | translate}}</a>
					<a *ngIf="authService.hasPermission(authService.permissionEnum.ViewNotificationTemplatePage)"
					mat-menu-item routerLink="/notification-templates">{{'APP.NAVIGATION.NOTIFICATION-TEMPLATES' |
					translate}}</a>
					<a *ngIf="authService.hasPermission(authService.permissionEnum.ViewBlueprintTemplatePage)" mat-menu-item
					routerLink="/blueprint-templates">{{'APP.NAVIGATION.BLUEPRINT-TEMPLATES' | translate}}</a>
				</mat-menu>
			</span>
		</div> -->
		<!-- <a *ngIf="authService.hasPermission(authService.permissionEnum.ViewNotificationEventRulePage)" mat-menu-item routerLink="/notification-event-rules">{{'APP.NAVIGATION.NOTIFICATION-EVENT-RULES' | translate}}</a> -->
	<div class="col"></div>
	<div *ngIf="isAuthenticated() && areConsentsNeedAttention()" class="col-auto">
		<button mat-icon-button matTooltip="{{'APP.NAVIGATION.CONSENT-ATTENTION' | translate}}"
			(click)="consentsNeedAttentionClicked()">
			<mat-icon class="consent-icon">warning</mat-icon>
		</button>
	</div>
	<div *ngIf="isAuthenticated() && isTransientUser()" class="col-auto">
		<a routerLink="/user-profile" routerLinkActive="active" mat-icon-button
			matTooltip="{{'APP.NAVIGATION.TRANSIENT-PROMPT' | translate}}">
			<mat-icon>group_add</mat-icon>
		</a>
	</div>
	<div class="col-auto">
		<button mat-icon-button [matMenuTriggerFor]="themeMenu">
			<mat-icon>format_color_fill</mat-icon>
		</button>
		<mat-menu #themeMenu="matMenu">
			<button mat-menu-item (click)="onThemeSelected(themeTypes.Blue)">{{'APP.NAVIGATION.BLUE-THEME' |
				translate}}</button>
			<button mat-menu-item (click)="onThemeSelected(themeTypes.Pink)">{{'APP.NAVIGATION.PINK-THEME' |
				translate}}</button>
			<button mat-menu-item (click)="onThemeSelected(themeTypes.Primary)">{{'APP.NAVIGATION.PRIMARY-THEME' |
				translate}}</button>
		</mat-menu>
	</div>
	<div class="col-auto">
		<button mat-icon-button [matMenuTriggerFor]="languageMenu">
			<mat-icon>language</mat-icon>
		</button>
		<mat-menu #languageMenu="matMenu">
			<button mat-menu-item
				(click)="onLanguageSelected(languageTypes.English)">{{'APP.NAVIGATION.ENGLISH-LANGUAGE' |
				translate}}</button>
			<button mat-menu-item (click)="onLanguageSelected(languageTypes.Greek)">{{'APP.NAVIGATION.GREEK-LANGUAGE' |
				translate}}</button>
		</mat-menu>
	</div>
	<div class="col-auto"
		*ngIf="isAuthenticated() && authService.hasPermission(authService.permissionEnum.ViewInAppNotificationPage)">
		<button class="col-auto" mat-icon-button matTooltip="{{'APP.NAVIGATION.INAPP-NOTIFICATIONS' | translate}}"
			(click)="toggleInAppNotifications()">
			<mat-icon [matBadge]="inAppNotificationCount" [matBadgeHidden]="inAppNotificationCount <= 0"
				matBadgeColor="warn">mail</mat-icon>
		</button>
	</div>
	<div *ngIf="isAuthenticated()" class="col-auto">
		<a *ngIf="authService.hasPermission(authService.permissionEnum.ViewUserProfilePage)" mat-button
			routerLink="/user-profile" [queryParams]="getUserProfileQueryParams()" routerLinkActive="active"
			class="user-label">
			<span class="d-none d-md-inline">
				{{this.getPrincipalName()}}
			</span>
			<img *ngIf="authService.getUserProfilePictureRef()" class="profile-picture"
				[src]="getProfilePicture() | secureImage | async">
			<img *ngIf="!authService.getUserProfilePictureRef()" class="profile-picture" [src]="getProfilePicture()">
		</a>
		<span class="user-label"
			*ngIf="!authService.hasPermission(authService.permissionEnum.ViewUserProfilePage)">{{this.getPrincipalName()}}</span>
		<button mat-icon-button (click)="logout()">
			<mat-icon>exit_to_app</mat-icon>
		</button>
	</div>


	<div class="background-primary d-md-none pt-2 pb-2 side-navigation" *ngIf="expanded">
		<app-side-navigation [expanded]="true" (onNavigate)="closeNav()"></app-side-navigation>
	</div>
</mat-toolbar>
<div *ngIf="progressIndication" class="progress-bar">
	<mat-progress-bar color="accent" mode="indeterminate"></mat-progress-bar>
</div>
